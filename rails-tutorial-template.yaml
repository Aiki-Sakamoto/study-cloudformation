# AWSテンプレートのバージョン 2020年1月現在はこれで固定
AWSTemplateFormatVersion: "2010-09-09"
# テンプレートの説明 実行時に表示されるので書いたほうがいい
Description: RailsTutorial CloudFormation template

# AWSの各リソースを定義
Resources:
  # VPCの作成
  RailsTutorialVPC: 
    Type: "AWS::EC2::VPC"
    Properties:
      CidrBlock: 10.0.0.0/16
      InstanceTenancy: "default"
      EnableDnsSupport: "true"
      EnableDnsHostnames: "true"
      Tags:
      - Key: "Name"
        Value: "cfn-rails-tutorial"

  # プライベートサブネットの定義
  RailsTutorialSubnetPrivate1a:
    Type: "AWS::EC2::Subnet"
    Properties:
      CidrBlock: 10.0.2.0/24
      AvailabilityZone: "ap-northeast-1a"
      VpcId:
        Ref: "RailsTutorialVPC"
      Tags:
      - Key: "Name"
        Value: "cfn-private-subnet-1a"

  RailsTutorialSubnetPrivate1c: 
    Type: "AWS::EC2::Subnet"
    Properties: 
      CidrBlock: 10.0.3.0/24
      AvailabilityZone: "ap-northeast-1c"
      VpcId: 
        Ref: "RailsTutorialVPC"
      Tags: 
      - Key: "Name"
        Value: "cfn-private-subnet-1c"

  # パブリックサブネットの定義
  RailsTutorialSubnetPublic1a:
    Type: "AWS::EC2::Subnet"
    Properties:
      CidrBlock: 10.0.0.0/24
      AvailabilityZone: "ap-northeast-1a"
      VpcId:
        Ref: "RailsTutorialVPC"
      Tags:
        - Key: "Name"
          Value: "cfn-public-subnet-1a"

  RailsTutorialSubnetPublic1c:
    Type: "AWS::EC2::Subnet"
    Properties:
      CidrBlock: 10.0.1.0/24
      AvailabilityZone: "ap-northeast-1c"
      VpcId:
        Ref: "RailsTutorialVPC"
      Tags:
      - Key: "Name"
        Value: "cfn-public-subnet-1c"
